# Вступление

В этой статье описывается процесс создания сервисов с помощью D2C.
Все определения и параметры страницы создания (редактирования) сервисов описываются здесь.

## Что требуется знать

### Для всех сервисов

- Имена сервисов должны быть уникальны внутри всего аккаунта

- Директории, которые не должны удаляться после пересборок или редеплоев (пользовательский контент, плагины, логи и т.д.) должны быть указаны в [постоянном хранилище](getting-started/containers/#_2). Для этих директорий вы можете включить [синхронизацию](getting-started/containers/#_3) файлов между всеми контейнерами сервиса. Не используйте синхронизацию для файлов баз данных

- Все сервисы внутри проекта видны друг для друга. По умолчанию, доступ в Интернет закрыт (кроме NGINX и HAProxy). Вы можете открыть доступ в Интернет в блоке "Порты"

### Для сервисов приложений

- Если вы используете приватный репозиторий, вы должны добавить SSH ключ в ваш аккаунт (инструкции к [GitHub](https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/) и  [BitBucket](https://confluence.atlassian.com/bitbucket/add-an-ssh-key-to-an-account-302811853.html))

- Сервис должен слушать 0.0.0.0:3000 (а не 127.0.0.1:3000)

### Для других сервисов

- У NGINX, NGINX-Static и HAProxy по умолчанию включен доступ в Интернет на порте 80

## Параметры и определения

### Настройки сервиса

![Creating services - Service settings](../img/creating_services_settings.png)

| Параметр     | Обязательный     | Значение по умолчанию     | Комментарии |
| :------------- | :------------- | :------------- |:------------- |
| Имя                | Да      |           | Имя должно быть уникальным внутри всего аккаунта. Больше о [именовании](getting-started/services/#naming) |
| Конфигурация       | Да      | StandAlone | Поддерживаемые [конфигурации](getting-started/services/#_4)       |
| Версия             | Да      |           | Вы можете выбрать любую из [поддерживаемых версий](getting-started/services/#_4) здесь. Чаще всего по умолчанию выбрана наиболее стабильная       |
| Password/Root password | Нет    |           | Пароль или пароль пользователя root. Обязательный для некоторых конфигураций, например MongoDB ReplicaSet |
| Username            | Нет       |           | Создание пользователя в течении разворачивания. База данных будет создана с таким же именем    |
| UserPassword        | Нет       |           | Пароль для пользователя базы данных     |
| Предустановка       | Нет       |           | Дополнительное программное обеспечение, которое может потребоваться установить вместе с вашим сервисом    |
| PHP дополнения и Pecl пакеты   | Нет |      | Дополнительные модули для сервисов PHP-FPM и PHP-Apache  |
| Глобальные зависимости | Нет       |           | Команды для установки глобальных зависимостей вашего сервиса.<br>Примеры: **pip install**, **bundle install**, **apt-get install**, **npm install -g**   |

### Исходники

Только для [сервисов приложений](getting-started/services/#_5) и Docker

![Creating services - Application source](../img/creating_services_source.png)

| Параметр               | Обязательный         | Комментарии |
| :------------- | :------------- | :------------- |
| Git/URL репозитория      | Нет | Пример: [https://github.com/d2cio/nodejs-hello-world](https://github.com/d2cio/nodejs-hello-world) |
| Git \| ветка\тэг\коммит  | Нет | Вы можете указать ветку, тэг или коммит своего репозитория. Примеры:<br>branch `master`, tag `v1.4`, commit `62d2272bbf7f1c6841c70dd09657df78836fda9c`  |
| Git/Метод аутентификации | Нет | Варианты: **SSH** (рекомендуется), **Login/Password**.<br>Если вы используете приватный репозиторий, вы должны добавить SSH ключ в ваш аккаунт (инструкции к [GitHub](https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/) и  [BitBucket](https://confluence.atlassian.com/bitbucket/add-an-ssh-key-to-an-account-302811853.html)) |
| Git/Логин репозитория    | Нет | Логин для базовой аутентификации или для FTP сервера |
| Git/Пароль репозитория   | Нет | Пароль для базовой аутентификации или для FTP сервера |
| Скачать/URL              | Нет | Протоколы: http, https, ftp.<br> Форматы файлов: **.tar.bz2**, **.tar.gz**, **.tar**, **.zip**<br>Пример: [https://wordpress.org/latest.tar.gz](https://wordpress.org/latest.tar.gz)  |
| Скачать/Логин            | Нет | Логин к FTP серверу  |
| Скачать/Пароль           | Нет | Пароль к FTP серверу |
| Загрузить                | Нет | Вы можете загрузить архив с приложением с вашего компьютера.<br>Протоколы: **http**, **https**, **ftp**.<br> Форматы файлов: **.tar.bz2**, **.tar.gz**, **.tar**, **.zip**<br>Максимальный размер: **50MB** |

### Настройки приложения

![Creating services - volumes](../img/creating_services_app_settings.png)

| Параметр                                 | Обязательный       | Комментарии |
| :------------- |                            :------------- | :------------- |:------------- |
| Локальные зависимости и подготовка кода  | Нет     |  Команды для установки локальных зависимостей и подготовке кода к работе.<br>Примеры: **npm install**, **composer install**, **bower install**, и т.д. или для подготовки:<br>Примеры: **gulp build**, **grunt build**, и т.д. |
| Команда запуска                           | Да    |  [Команда запуска](platform/deployment/#_4) вашего приложения |
| Переменные окружения                     | Нет     |   |

### Порты

![Creating services - Ports](../img/creating_services_ports.png)

| Параметр                     | Обязательный     | Комментарии |
| :------------- | :------------- | :------------- |:------------- |
| Доступ из Интернета          | Да | Все сервисы внутри проекты [видны](platform/private-network/) друг для друга.<br>Если вы хотите, чтобы сервис был доступ из Интернета вы можете включить эту опцию и назначить порты.<br>Выключено по умолчанию для всех сервисов, кроме **NGINX** и **HAProxy** |
| Порты\Протокол               | Да  | Варианты: UDP или TCP |
| Порты\Порт                   | Да  | Должно указываться целое число |

### Постоянное хранилище

![Creating services - volumes](../img/creating_services_volumes.png)

| Параметр                     | Обязательный      | Комментарии |
| :------------- | :------------- | :------------- |
| Добавить папку (Volume)         | Нет  |  [Директории постоянного хранилища](getting-started/containers/#_2) (Volumes) - директории, который не должны удаляться после пересборок или редеплоев (пользовательский контент, плагины, логи и т.д.) |
| Синхронизация                          | Нет  | В случаях, когда у вас более одного контейнера в сервисе вам может потребоваться синхронизация данных между директориями постоянного хранилища. Отметьте галочкой директории, которые необходимо синхронизировать |

### Конфиги

![Creating services - configs](../img/creating_services_configs2.png)

| Параметр      | Обязательный      | Комментарии |
| :------------- | :------------- | :------------- |
| Добавить пользовательский конфиг  | Нет  | У некоторых сервисов есть стандартные конфиги (например, PHP-FPM, PHP-Apache, MongoDB). Вы можете добавлять дополнительные конфиги или редактировать/заменять стандартные |

### Обслуживаемые сервисы

Только для NGINX, NGINX-Cluster и HAProxy. Вы можете использовать автоматически генерируемые конфиги, редактировать их ли добавлять свои. [Домены и сертификаты](platform/domains-and-certificates/) должны указываться в этом блоке.

![Creating services - configure services](../img/creating_services_configure_services.png)

| Параметр      | Обязательный      | Значение по умолчанию | Комментарии |
| :------------- | :------------- | :------------- | :------------- |
| Протокол            | Да    | HTTP    | Варианты: HTTP, HTTPS   |
| Режим               | Да    | Proxy   | Варианты: Proxy, uWSGI  |
| Домены              | Нет   |         | Домены и поддомены сервиса |
| Обслуживать статику | Нет   | Выключено     |  |

### Выбор серверов

![Creating services - select hosts](../img/creating_services_select_hosts.png)

Отметьте сервер(а), на котором нужно развернуть приложение.

<!--
## How to create

### Data services


| [MongoDB]()     |   [MySQL/MariaDB/Percona]()   | [PostgreSQL]() | [Redis]()     |   [Crate]()   | [Memcached]() |   [ElasticSearch]()   |
| :------------- | :------------- | | :------------- | :------------- | | :------------- |



</div>



### Aplication services

| [Node.js]()     |   [Python]()   | [Go]() | [Ruby]()     |   [PHP-FPM]()   | [PHP-Apache]() |  
| :------------- | :------------- | | :------------- | :------------- | |


### Other services

| [NGINX]()     |   [NGINX-Cluster]()   | [NGINX-Static]() | [Docker]()     |   
| :------------- | :------------- | | :------------- |
-->
